{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Glorison Lai\\\\Documents\\\\GitHub\\\\weatherapp\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:\\\\Users\\\\Glorison Lai\\\\Documents\\\\GitHub\\\\weatherapp\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Glorison Lai\\\\Documents\\\\GitHub\\\\weatherapp\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Glorison Lai\\\\Documents\\\\GitHub\\\\weatherapp\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Autocomplete}from'@material-ui/lab';import{TextField,CircularProgress}from'@material-ui/core';import Services from'../../../services/services';var CitySearcher=function CitySearcher(_ref){var onSubmit=_ref.onSubmit,_onBlur=_ref.onBlur;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),value=_useState4[0],setValue=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),id=_useState6[0],setId=_useState6[1];useEffect(function(){if(!loading)return;var getData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Services.getWeather({locId:id});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref2.apply(this,arguments);};}();onSubmit(getData());setLoading(false);},[loading,id]);var cities=[{name:'Melbourne',country:'AU',id:2158177},{name:'Melbourne',country:'US',id:4163971},{name:'Sydney',country:'AU',id:2147714},{name:'Toronto',country:'CA',id:6167865}];function createLabel(_ref3){var name=_ref3.name,country=_ref3.country;return\"\".concat(name,\", \").concat(country);}var setLocation=function setLocation(newId){setId(newId);setLoading(true);};return/*#__PURE__*/React.createElement(\"div\",{className:\"card search-card\"},/*#__PURE__*/React.createElement(Autocomplete,{options:cities,getOptionLabel:function getOptionLabel(option){return createLabel(option);},autoHighlight:true,style:{width:'100%'},loading:loading,renderInput:function renderInput(params){return/*#__PURE__*/React.createElement(TextField,Object.assign({},params,{value:value,autoFocus:true,onBlur:function onBlur(){return _onBlur();},style:{width:'90%',paddingTop:'1rem'},placeholder:\"Enter city name...\",onChange:function onChange(event){return setValue(event.target.value);},InputProps:_objectSpread(_objectSpread({},params.InputProps),{},{endAdornment:/*#__PURE__*/React.createElement(React.Fragment,null,loading?/*#__PURE__*/React.createElement(CircularProgress,{color:\"inherit\",size:20}):null,params.InputProps.endAdornment)})}));},onChange:function onChange(e,value){return setLocation(value.id);}}));};export default CitySearcher;","map":{"version":3,"sources":["C:/Users/Glorison Lai/Documents/GitHub/weatherapp/client/src/components/util/card/city-searcher.jsx"],"names":["React","useState","useEffect","Autocomplete","TextField","CircularProgress","Services","CitySearcher","onSubmit","onBlur","loading","setLoading","value","setValue","id","setId","getData","getWeather","locId","cities","name","country","createLabel","setLocation","newId","option","width","params","paddingTop","event","target","InputProps","endAdornment","e"],"mappings":"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","sourcesContent":["import React, {useState, useEffect } from 'react';\r\nimport { Autocomplete } from '@material-ui/lab';\r\nimport { TextField, CircularProgress } from '@material-ui/core';\r\nimport Services from '../../../services/services';\r\n\r\nconst CitySearcher = ({onSubmit, onBlur}) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState('');\r\n  const [id, setId] = useState(0);\r\n\r\n  useEffect(() =>  {\r\n    if (!loading) return; \r\n\r\n    const getData = async() => {\r\n      return await Services.getWeather({locId: id});\r\n    };\r\n\r\n    onSubmit(getData());\r\n    setLoading(false);\r\n    \r\n  }, [loading, id]);\r\n\r\n  const cities=[\r\n    { name: 'Melbourne',\r\n      country: 'AU',\r\n      id: 2158177,\r\n    },\r\n    { \r\n      name: 'Melbourne',\r\n      country: 'US',\r\n      id: 4163971,\r\n    },\r\n    {\r\n      name: 'Sydney',\r\n      country: 'AU',\r\n      id: 2147714,\r\n    },\r\n    {\r\n      name: 'Toronto',\r\n      country: 'CA',\r\n      id: 6167865,\r\n    },\r\n  ]\r\n\r\n  function createLabel({name, country}) {\r\n    return `${name}, ${country}`;\r\n  }\r\n\r\n  const setLocation = (newId) => {\r\n    setId(newId);\r\n    setLoading(true);\r\n  }\r\n\r\n  return (\r\n    <div className=\"card search-card\">\r\n      <Autocomplete\r\n        options={cities}\r\n        getOptionLabel={(option) => createLabel(option)}\r\n        autoHighlight\r\n        style={{ width: '100%' }}\r\n        loading={loading}\r\n        renderInput={(params) => \r\n          <TextField \r\n            {...params}\r\n            value={value}\r\n            autoFocus={true}\r\n            onBlur={() => onBlur()}\r\n            style={ { width: '90%', paddingTop: '1rem'}}\r\n            placeholder=\"Enter city name...\"\r\n            onChange={(event) => setValue(event.target.value)}\r\n            InputProps={{\r\n              ...params.InputProps,\r\n              endAdornment: (\r\n                <React.Fragment>\r\n                  {loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n                  {params.InputProps.endAdornment}\r\n                </React.Fragment>\r\n              )\r\n            }}\r\n          />\r\n        }\r\n        onChange={(e, value) => setLocation(value.id)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CitySearcher;"]},"metadata":{},"sourceType":"module"}