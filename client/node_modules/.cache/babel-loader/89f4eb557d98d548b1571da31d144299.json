{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Glorison Lai\\\\Documents\\\\GitHub\\\\weatherapp\\\\client\\\\src\\\\components\\\\util\\\\card\\\\city-searcher.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Autocomplete } from '@material-ui/lab';\nimport { TextField, CircularProgress } from '@material-ui/core';\nimport Services from '../../../services/services';\n\nconst CitySearcher = ({\n  onSubmit,\n  onBlur,\n  initVal\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [value, setValue] = useState('');\n  const [id, setId] = useState(0);\n  const [cities, setCities] = useState([]);\n  useEffect(() => {\n    if (!loading) return;\n\n    const getData = async () => {\n      return await Services.getWeather({\n        locId: id\n      });\n    };\n\n    onSubmit(getData());\n    setLoading(false);\n  }, [loading, id]);\n  useEffect(() => {\n    if (value.length < 3) return;\n\n    const getCities = async () => {\n      return await Services.getCities({\n        query: value\n      });\n    };\n\n    setCities(getCities());\n    setCities({\n      name: 'Loading',\n      country: ''\n    });\n  });\n\n  function createLabel({\n    name,\n    country\n  }) {\n    return `${name}, ${country}`;\n  }\n\n  const setLocation = newId => {\n    setId(newId);\n    setLoading(true);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card search-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Autocomplete, {\n    options: cities,\n    getOptionLabel: option => createLabel(option),\n    autoHighlight: true,\n    style: {\n      width: '100%'\n    },\n    loading: loading,\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      value: value,\n      autoFocus: true,\n      onBlur: () => onBlur(),\n      style: {\n        width: '90%',\n        paddingTop: '1rem'\n      },\n      placeholder: \"Enter city name...\",\n      onChange: event => setValue(event.target.value),\n      InputProps: { ...params.InputProps,\n        endAdornment: /*#__PURE__*/React.createElement(React.Fragment, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 17\n          }\n        }, loading ? /*#__PURE__*/React.createElement(CircularProgress, {\n          color: \"inherit\",\n          size: 20,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 30\n          }\n        }) : null, params.InputProps.endAdornment)\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }\n    })),\n    onChange: (e, value) => !!value ? setLocation(value.id) : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default CitySearcher;","map":{"version":3,"sources":["C:/Users/Glorison Lai/Documents/GitHub/weatherapp/client/src/components/util/card/city-searcher.jsx"],"names":["React","useState","useEffect","Autocomplete","TextField","CircularProgress","Services","CitySearcher","onSubmit","onBlur","initVal","loading","setLoading","value","setValue","id","setId","cities","setCities","getData","getWeather","locId","length","getCities","query","name","country","createLabel","setLocation","newId","option","width","params","paddingTop","event","target","InputProps","endAdornment","e"],"mappings":"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","sourcesContent":["import React, {useState, useEffect } from 'react';\r\nimport { Autocomplete } from '@material-ui/lab';\r\nimport { TextField, CircularProgress } from '@material-ui/core';\r\nimport Services from '../../../services/services';\r\n\r\nconst CitySearcher = ({onSubmit, onBlur, initVal}) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState('');\r\n  const [id, setId] = useState(0);\r\n  const [cities, setCities] = useState([]);\r\n\r\n  useEffect(() =>  {\r\n    if (!loading) return; \r\n\r\n    const getData = async() => {\r\n      return await Services.getWeather({locId: id});\r\n    };\r\n\r\n    onSubmit(getData());\r\n    setLoading(false);\r\n    \r\n  }, [loading, id]);\r\n\r\n  useEffect(() => {\r\n    if (value.length < 3) return;\r\n\r\n    const getCities = async() => {\r\n      return await Services.getCities({query: value});\r\n    }\r\n\r\n    setCities(getCities());\r\n    setCities({name: 'Loading', country: ''});\r\n  })\r\n\r\n  function createLabel({name, country}) {\r\n    return `${name}, ${country}`;\r\n  }\r\n\r\n  const setLocation = (newId) => {\r\n    setId(newId);\r\n    setLoading(true);\r\n  }\r\n\r\n  return (\r\n    <div className=\"card search-card\">\r\n      <Autocomplete\r\n        options={cities}\r\n        getOptionLabel={(option) => createLabel(option)}\r\n        autoHighlight\r\n        style={{ width: '100%' }}\r\n        loading={loading}\r\n        renderInput={(params) => \r\n          <TextField \r\n            {...params}\r\n            value={value}\r\n            autoFocus={true}\r\n            onBlur={() => onBlur()}\r\n            style={ { width: '90%', paddingTop: '1rem'}}\r\n            placeholder=\"Enter city name...\"\r\n            onChange={(event) => setValue(event.target.value)}\r\n            InputProps={{\r\n              ...params.InputProps,\r\n              endAdornment: (\r\n                <React.Fragment>\r\n                  {loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n                  {params.InputProps.endAdornment}\r\n                </React.Fragment>\r\n              )\r\n            }}\r\n          />\r\n        }\r\n        onChange={(e, value) => !!value ? setLocation(value.id) : null}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CitySearcher;"]},"metadata":{},"sourceType":"module"}